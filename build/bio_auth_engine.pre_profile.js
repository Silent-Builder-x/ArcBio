function weight(x){ return 2097152 * x.network_depth + 256 * x.total_gates + 256 * x.network_size + x.preprocess_weight;}var pre_profile = { 'code':
{"source_file":"use arcis::*;\n\n#[encrypted]\nmod bio_auth_engine {\n    use arcis::*;\n\n    /// 生物特征数据结构\n    /// 升级：使用 [u64; 4] 模拟更复杂的生物特征向量（Feature Vector）\n    /// 真实的 FaceID/TouchID 提取的是一组特征点，而非单一哈希\n    pub struct BioData {\n        pub features: [u64; 4],\n    }\n\n    /// 验证结果\n    pub struct AuthResult {\n        pub match_score: u64,      // 匹配的特征片段数量 (用于调试/分析)\n        pub is_authenticated: u64, // 1 为通过, 0 为拒绝\n    }\n\n    /// 核心指令：生物特征模糊匹配 (Fuzzy Matching)\n    #[instruction]\n    pub fn verify_biometric(\n        template_ctxt: Enc<Shared, BioData>, // 链上存储的注册模版\n        attempt_ctxt: Enc<Shared, BioData>   // 用户当前的登录尝试\n    ) -> Enc<Shared, AuthResult> {\n        let template = template_ctxt.to_arcis();\n        let attempt = attempt_ctxt.to_arcis();\n        \n        let mut score = 0u64;\n\n        // 执行并行特征比对\n        // 我们比较 4 个特征片段。因为生物数据采集受光线/角度影响，\n        // 往往不会 100% 一致。我们需要计算“相似度”而非“全等性”。\n        for i in 0..4 {\n            let is_segment_match = template.features[i] == attempt.features[i];\n            \n            // 使用 Mux (Multiplexer) 累加分数\n            score = if is_segment_match { score + 1 } else { score };\n        }\n\n        // 阈值判定逻辑\n        // 设定阈值：如果 4 个片段中至少有 3 个匹配 (75% 相似度)，则认证通过\n        let passed = if score >= 3 { \n            1u64 \n        } else { \n            0u64 \n        };\n\n        let result = AuthResult {\n            match_score: score,\n            is_authenticated: passed,\n        };\n\n        // 将结果重新加密并返回给请求者\n        // 注意：模版拥有者和尝试者通常是同一人，所以这里返回给 owner (template_ctxt.owner)\n        template_ctxt.owner.from_arcis(result)\n    }\n}","code":[{"code":"self.owner","region":"Unknown"},{"code":"self.data","region":"Unknown"},{"code":"Self :: __arcis_inner(self.owner, self.data)","region":"Unknown"},{"code":"let template = template_ctxt.to_arcis();","region":{"Known":[{"line":25,"column":8},{"line":25,"column":48}]}},{"code":"let attempt = attempt_ctxt.to_arcis();","region":{"Known":[{"line":26,"column":8},{"line":26,"column":46}]}},{"code":"let mut score = 0u64;","region":{"Known":[{"line":28,"column":8},{"line":28,"column":29}]}},{"code":"self.0","region":"Unknown"},{"code":"self.1 - 1","region":"Unknown"},{"code":"start","region":"Unknown"},{"code":"end","region":"Unknown"},{"code":"InclusiveRangeIterator { start, end }","region":"Unknown"},{"code":"InclusiveRangeIterator :: new(self.0, self.1 - 1)","region":"Unknown"},{"code":"self.end - self.start + 1","region":"Unknown"},{"code":"0","region":"Unknown"},{"code":"#[arcis_circuit = \"max\"] fn max_circ < T > (a : T, b : T) -> T {}","region":"Unknown"},{"code":"self","region":"Unknown"},{"code":"other","region":"Unknown"},{"code":"max_circ(self, other)","region":"Unknown"},{"code":"(self.end - self.start + 1).max(0)","region":"Unknown"},{"code":"let res = self.start;","region":"Unknown"},{"code":"self.start += 1;","region":"Unknown"},{"code":"res","region":"Unknown"},{"code":"i","region":{"Known":[{"line":34,"column":53},{"line":34,"column":54}]}},{"code":"i","region":{"Known":[{"line":34,"column":76},{"line":34,"column":77}]}},{"code":"let is_segment_match = template.features [i] == attempt.features [i];","region":{"Known":[{"line":34,"column":12},{"line":34,"column":79}]}},{"code":"is_segment_match","region":{"Known":[{"line":37,"column":23},{"line":37,"column":39}]}},{"code":"score","region":{"Known":[{"line":37,"column":61},{"line":37,"column":66}]}},{"code":"score + 1","region":{"Known":[{"line":37,"column":42},{"line":37,"column":51}]}},{"code":"score = if is_segment_match { score + 1 } else { score };","region":{"Known":[{"line":37,"column":12},{"line":37,"column":69}]}},{"code":"for i in 0 .. 4\n{\n    let is_segment_match = template.features [i] == attempt.features [i];\n    score = if is_segment_match { score + 1 } else { score };\n}","region":{"Known":[{"line":33,"column":8},{"line":38,"column":9}]}},{"code":"score >= 3","region":{"Known":[{"line":42,"column":24},{"line":42,"column":34}]}},{"code":"0u64","region":{"Known":[{"line":45,"column":12},{"line":45,"column":16}]}},{"code":"1u64","region":{"Known":[{"line":43,"column":12},{"line":43,"column":16}]}},{"code":"let passed = if score >= 3 { 1u64 } else { 0u64 };","region":{"Known":[{"line":42,"column":8},{"line":46,"column":10}]}},{"code":"score","region":{"Known":[{"line":49,"column":25},{"line":49,"column":30}]}},{"code":"passed","region":{"Known":[{"line":50,"column":30},{"line":50,"column":36}]}},{"code":"let result = AuthResult { match_score : score, is_authenticated : passed, };","region":{"Known":[{"line":48,"column":8},{"line":51,"column":10}]}},{"code":"result","region":{"Known":[{"line":55,"column":39},{"line":55,"column":45}]}},{"code":"1","region":"Unknown"},{"code":"fn inner < T > (a : T, b : T) -> T { ((a + b) as ArcisField) as T }","region":"Unknown"},{"code":"self","region":"Unknown"},{"code":"other","region":"Unknown"},{"code":"a + b","region":"Unknown"},{"code":"(a + b) as ArcisField","region":"Unknown"},{"code":"((a + b) as ArcisField) as T","region":"Unknown"},{"code":"inner(self, other)","region":"Unknown"},{"code":"self.nonce = self.nonce.wrapping_add(1);","region":"Unknown"},{"code":"self","region":"Unknown"},{"code":"a","region":"Unknown"},{"code":"a","region":"Unknown"},{"code":"self.from_arcis_inner(a)","region":"Unknown"},{"code":"a","region":"Unknown"},{"code":"let phantom = [a; 0];","region":"Unknown"},{"code":"data","region":"Unknown"},{"code":"phantom","region":"Unknown"},{"code":"let data = EncData { data, phantom };","region":"Unknown"},{"code":"owner","region":"Unknown"},{"code":"data","region":"Unknown"},{"code":"Self { owner, data }","region":"Unknown"},{"code":"Enc :: new_inner(self, a, self.from_arcis_inner(a))","region":"Unknown"},{"code":"template_ctxt.owner.from_arcis(result)","region":{"Known":[{"line":55,"column":8},{"line":55,"column":46}]}}]}
, 'instructions':
{"verify_biometric":{"profilees":[{"code_idx":0,"before_size_id":0,"after_size_id":0},{"code_idx":1,"before_size_id":0,"after_size_id":1},{"code_idx":2,"before_size_id":0,"after_size_id":2},{"code_idx":3,"before_size_id":0,"after_size_id":2},{"code_idx":0,"before_size_id":2,"after_size_id":2},{"code_idx":1,"before_size_id":2,"after_size_id":2},{"code_idx":2,"before_size_id":2,"after_size_id":3},{"code_idx":4,"before_size_id":2,"after_size_id":3},{"code_idx":5,"before_size_id":3,"after_size_id":3},{"code_idx":6,"before_size_id":3,"after_size_id":3},{"code_idx":7,"before_size_id":3,"after_size_id":4},{"code_idx":8,"before_size_id":4,"after_size_id":4},{"code_idx":9,"before_size_id":4,"after_size_id":4},{"code_idx":10,"before_size_id":4,"after_size_id":4},{"code_idx":11,"before_size_id":3,"after_size_id":4},{"code_idx":12,"before_size_id":4,"after_size_id":5},{"code_idx":13,"before_size_id":5,"after_size_id":5},{"code_idx":14,"before_size_id":5,"after_size_id":5},{"code_idx":15,"before_size_id":5,"after_size_id":5},{"code_idx":16,"before_size_id":5,"after_size_id":5},{"code_idx":17,"before_size_id":5,"after_size_id":6},{"code_idx":18,"before_size_id":4,"after_size_id":6},{"code_idx":19,"before_size_id":6,"after_size_id":6},{"code_idx":20,"before_size_id":6,"after_size_id":6},{"code_idx":21,"before_size_id":6,"after_size_id":6},{"code_idx":22,"before_size_id":6,"after_size_id":6},{"code_idx":23,"before_size_id":6,"after_size_id":6},{"code_idx":24,"before_size_id":6,"after_size_id":7},{"code_idx":25,"before_size_id":7,"after_size_id":7},{"code_idx":26,"before_size_id":7,"after_size_id":7},{"code_idx":27,"before_size_id":7,"after_size_id":7},{"code_idx":28,"before_size_id":7,"after_size_id":8},{"code_idx":19,"before_size_id":8,"after_size_id":8},{"code_idx":20,"before_size_id":8,"after_size_id":9},{"code_idx":21,"before_size_id":9,"after_size_id":9},{"code_idx":22,"before_size_id":9,"after_size_id":9},{"code_idx":23,"before_size_id":9,"after_size_id":9},{"code_idx":24,"before_size_id":9,"after_size_id":10},{"code_idx":25,"before_size_id":10,"after_size_id":10},{"code_idx":26,"before_size_id":10,"after_size_id":10},{"code_idx":27,"before_size_id":10,"after_size_id":11},{"code_idx":28,"before_size_id":10,"after_size_id":12},{"code_idx":19,"before_size_id":12,"after_size_id":12},{"code_idx":20,"before_size_id":12,"after_size_id":13},{"code_idx":21,"before_size_id":13,"after_size_id":13},{"code_idx":22,"before_size_id":13,"after_size_id":13},{"code_idx":23,"before_size_id":13,"after_size_id":13},{"code_idx":24,"before_size_id":13,"after_size_id":14},{"code_idx":25,"before_size_id":14,"after_size_id":14},{"code_idx":26,"before_size_id":14,"after_size_id":14},{"code_idx":27,"before_size_id":14,"after_size_id":15},{"code_idx":28,"before_size_id":14,"after_size_id":16},{"code_idx":19,"before_size_id":16,"after_size_id":16},{"code_idx":20,"before_size_id":16,"after_size_id":17},{"code_idx":21,"before_size_id":17,"after_size_id":17},{"code_idx":22,"before_size_id":17,"after_size_id":17},{"code_idx":23,"before_size_id":17,"after_size_id":17},{"code_idx":24,"before_size_id":17,"after_size_id":18},{"code_idx":25,"before_size_id":18,"after_size_id":18},{"code_idx":26,"before_size_id":18,"after_size_id":18},{"code_idx":27,"before_size_id":18,"after_size_id":19},{"code_idx":28,"before_size_id":18,"after_size_id":20},{"code_idx":29,"before_size_id":3,"after_size_id":20},{"code_idx":30,"before_size_id":20,"after_size_id":21},{"code_idx":31,"before_size_id":21,"after_size_id":21},{"code_idx":32,"before_size_id":21,"after_size_id":21},{"code_idx":33,"before_size_id":20,"after_size_id":22},{"code_idx":34,"before_size_id":22,"after_size_id":22},{"code_idx":35,"before_size_id":22,"after_size_id":22},{"code_idx":36,"before_size_id":22,"after_size_id":22},{"code_idx":37,"before_size_id":22,"after_size_id":22},{"code_idx":38,"before_size_id":22,"after_size_id":22},{"code_idx":39,"before_size_id":22,"after_size_id":22},{"code_idx":40,"before_size_id":22,"after_size_id":22},{"code_idx":41,"before_size_id":22,"after_size_id":22},{"code_idx":42,"before_size_id":22,"after_size_id":23},{"code_idx":43,"before_size_id":22,"after_size_id":23},{"code_idx":44,"before_size_id":22,"after_size_id":24},{"code_idx":45,"before_size_id":22,"after_size_id":24},{"code_idx":46,"before_size_id":22,"after_size_id":24},{"code_idx":47,"before_size_id":24,"after_size_id":24},{"code_idx":48,"before_size_id":24,"after_size_id":24},{"code_idx":49,"before_size_id":24,"after_size_id":24},{"code_idx":50,"before_size_id":24,"after_size_id":25},{"code_idx":51,"before_size_id":25,"after_size_id":25},{"code_idx":52,"before_size_id":25,"after_size_id":25},{"code_idx":53,"before_size_id":25,"after_size_id":25},{"code_idx":54,"before_size_id":25,"after_size_id":25},{"code_idx":55,"before_size_id":25,"after_size_id":25},{"code_idx":56,"before_size_id":25,"after_size_id":25},{"code_idx":57,"before_size_id":25,"after_size_id":25},{"code_idx":58,"before_size_id":25,"after_size_id":25},{"code_idx":59,"before_size_id":24,"after_size_id":25},{"code_idx":60,"before_size_id":22,"after_size_id":25}]}}
, 'instruction_locations':
{"verify_biometric":{"Known":[{"line":20,"column":4},{"line":20,"column":18}]}}
};
